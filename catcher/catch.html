<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>数据抓取器@纳谷概念云</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="../../Content/bootstrap/2.3.2/css/bootstrap.css" rel="stylesheet" type="text/css" />
    <link href="../../Content/bootstrap/2.3.2/css/bootstrap-responsive.min.css" rel="stylesheet"
        type="text/css" />
    <style type="text/css">
        .icon-chevron-right
        {
            float:right;
            margin-left:10px;
        }
        .tab-content, .dl-horizontal dt
        {
            overflow: visible;
        }
        .pv-nav-pills
        {
            margin-bottom: 0;
        }
        .nav-pills li span
        {
            padding-top: 8px;
            padding-bottom: 8px;
            margin-top: 2px;
            margin-bottom: 2px;
            -webkit-border-radius: 5px;
            -moz-border-radius: 5px;
            border-radius: 5px;
            display: block;
        }
    </style>
</head>
<body>
    <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

            <a class="brand" href="#">数据抓取器</a>
            <div class="nav-collapse">
                <ul class="nav">
                    <li>
                        <a href="/apps/index.html">
                            <i class="icon-chevron-left icon-white"></i>
                            纳谷概念云
                        </a>
                    </li>
                    <li>
                      <a href="javascript:void(0)" id="btnClearStorage"></a>
                  </li>
                </ul>
                <ul class="nav pull-right">
                    <li class=" nagu-logout" style="display: none"><a href="#" onclick="dlgLogin.toggle();">
                        <i class="icon-user icon-white"></i>
                        登录</a></li>
                    <li class="nagu-logged" style="display: none"><a id="accountInfo">我的帐户</a>
                    </li>
                    <li class="nagu-logged" style="display: none"><a href="javascript:void(0)" id="btnLogout"
                        onclick="logout();">
                        <i class="icon-off icon-white"></i>
                        注销</a></li>
                </ul>
            </div>
        </div>
      </div>
    </div>

    <div class="container" style="padding-top:60px;">
        <div class="row">
            <ul class="nav nav-tabs nagu-tab hide" id="tab1">
                    <li class="active">
                        <a href="#part1" data-toggle="tab">
                            <i class="icon-chevron-right"></i>
                             1. 设置条目容器及类型
                        </a>
                    </li>
                    <li>
                        <a href="#part2" data-toggle="tab">
                            <i class="icon-chevron-right"></i>
                             2. 配置数据源
                        </a>
                    </li>
                    <li>
                        <a href="#part3" data-toggle="tab">
                            <i class="icon-chevron-right"></i>
                             3. 数据预览
                        </a>
                    </li>
                    <li>
                        <a href="#part4" data-toggle="tab">
                            <i class="icon-chevron-right"></i>
                             4. 设置取值代码
                        </a>
                    </li>
                    <li>
                        <a href="#part5" data-toggle="tab">
                            <i class="icon-chevron-right"></i>
                             5. 条目数据预览
                        </a>
                    </li>
                    <li>
                        <a href="#part6" data-toggle="tab">
                            <i class="icon-chevron-right"></i>
                             6. 抓取数据
                        </a>
                    </li>
                </ul>

            <div class="offset2 tab-content hide nagu-logged">
                <div class="tab-pane active" id="part1">
                    <h2>1. 配置条目容器及类型</h2>
                    <div class="form-horizontal">
                        <div class="control-group">
                            <label class="control-label">条目容器ID：</label>
                            <div class="controls">
                                <input class="span4" onchange="checkBag(this);"
                                    value="d07c8cb7-8fe8-4a33-9923-ef17c3392651"
                                    placeholder="输入条目容器ID" />
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label">条目类型ID：</label>
                            <div class="controls">
                                <input class="span4" onchange="checkClass(this);"
                                    value="68f52804-8fa2-4d82-b5ba-55d0750fc41e"
                                    placeholder="输入条目类型ID" />
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label">概念默认处理方法：</label>
                            <div class="controls">
                                <select>
                                    <option value="0">发现同名概念时自动选用，否则创建新的</option>
                                    <option value="1">只有同名概念同时在容器中时才自动选用</option>
                                    <option value="2">无论如何都创建新的概念</option>
                                </select>
                            </div>
                        </div>

                        <div class="control-group">
                            <div class="controls">
                                <button class="btn btn-large btn-primary" disabled
                                    onclick="$('#tab1 a').eq(1).tab('show');">
                                    <i class="icon-chevron-right icon-white"></i>
                                    好了，下一步</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="tab-pane" id="part2">
                    <h2>2. 配置数据源</h2>
                    <div class="form-horizontal">
                        <div class="control-group">
                            <label class="control-label">由Url获取数据: </label>
                            <div class="controls">
                                <input id="url" class="span7"
                                    value="http://zh.wikipedia.org/wiki/%E4%BA%91%E5%8D%97%E7%9C%81%E9%AB%98%E7%AD%89%E5%AD%A6%E6%A0%A1%E5%88%97%E8%A1%A8"
                                    placeholder="输入将抓取数据的网页地址" />
                                <button class="btn btn-primary" onclick="getUrlData();">获取URL数据</button>
                            </div>
                            <iframe class="hide" id="ifr"></iframe>
                        </div>
                        
                        <div class="control-group">
                            <label class="control-label">或直接输入HTML数据: </label>
                            <div class="controls">
                                <textarea id="htmlData" class="span8" rows="10"
                                    placeholder="输入HTML数据，或从URL获取"></textarea>
                            </div>
                        </div>

                        <div class="control-group">
                            <div class="controls">
                                <button class="btn btn-large"
                                    onclick="$('#tab1 a').eq(0).tab('show');">
                                    <i class="icon-chevron-left"></i>
                                    返回上一步</button>
                                <button class="btn btn-large btn-primary" disabled
                                    id="btnToPart3"
                                    onclick="$('#tab1 a').eq(2).tab('show');">
                                    <i class="icon-chevron-right icon-white"></i>
                                    好了，下一步</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane" id="part3">
                    
                    <div class="form-horizontal">
                        <h2>3. 设置取值代码</h2>
                        <h3>3.1 数据源过滤代码</h3>
                        <div class="control-group">
                            <label class="control-label">数据源过滤代码：</label>
                            <div class="controls">
                                <input class="span6" id="code"
                                    value="body.find('tr').slice(1,21)"
                                    placeholder="输入body的过滤代码，比如：body.find('#type');" />
                                <br />
                                <span>返回值：</span>
                                <span class="label label-info">jQuery对象</span>
                                <br />
                                <span>可用参数：</span>
                                <span class="label label-info">body</span>

                            </div>
                        </div>

                        <h3>3.2 条目概念取值代码</h3>
                        <div class="control-group" id="propertyCodeTemplate">
                            <label class="control-label">条目名称选取代码：</label>
                            <div class="controls">
                                <input class="span6" id="fnCode"
                                    value="dataItem.children().eq(1).text()"
                                    placeholder="输入条目名称选取代码，比如：dataItem.children().eq(1).text()" />
                                <div id="propertyCodeRef">
                                    <span>返回值：</span>
                                    <span class="label label-info">字符串</span>
                                    <br />
                                    <span>可用参数：</span>
                                    <span class="label label-info">dataItem</span>
                                </div>
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label">条目简介选取代码：</label>
                            <div class="controls">
                                <input class="span6" id="descCode"
                                    value="dataItem.children().eq(1).text()"
                                    placeholder="输入条目简介选取代码，比如：dataItem.children().eq(1).text()" />
                                <br />
                                <span>返回值：</span>
                                <span class="label label-info">字符串</span>
                                <br />
                                <span>可用参数：</span>
                                <span class="label label-info">dataItem</span>
                            </div>
                        </div>

                        <h3>3.3 条目属性值取值代码</h3>
                        <div id="itemProperties"></div>

                        <div class="control-group">
                            <div class="controls">
                                <button class="btn btn-large"
                                    onclick="$('#tab1 a').eq(1).tab('show');">
                                    <i class="icon-chevron-left"></i>
                                    返回上一步</button>
                                <button class="btn btn-large btn-primary"
                                    onclick="$('#tab1 a').eq(3).tab('show');preview();">
                                    <i class="icon-chevron-right icon-white"></i>
                                    好了，下一步</button>
                            </div>
                        </div>
                    </div>
                    
                </div>

                <div class="tab-pane" id="part4">
                    <h2>4. 数据条目预览</h2>
                    <!--<div class="form-horizontal">
                        <div class="control-group">
                            <button class="btn btn-primary" onclick="preview();">点击预览数据条目</button>
                        </div>
                    </div>-->
                    <table class="table">
                        <thead id="itemTableHead">
                            <tr>
                                <th class="const">#</th>
                                <th class="const">名称</th>
                                <th class="const">简介</th>
                            </tr>
                        </thead>
                        <tbody id="itemTable"></tbody>
                    </table>
                    <!--<div id="objPre"></div>-->
                    <div class="control-group">
                        <div class="controls">
                            <button class="btn btn-large"
                                onclick="$('#tab1 a').eq(2).tab('show');">
                                <i class="icon-chevron-left"></i>
                                返回上一步</button>
                            <button class="btn btn-large btn-primary"
                                onclick="$('#tab1 a').eq(4).tab('show');">
                                <i class="icon-chevron-right icon-white"></i>
                                好了，下一步</button>
                        </div>
                    </div>
                </div>

                <div class="tab-pane" id="part5">
                    <h2>5. 准备信息概述</h2>
                    <dl class="dl-horizontal">
                        <dt>数据容器：</dt>
                        <dd><span class="label label-info" id="summary_bag"></span></dd>
                        <dt>条目类型：</dt>
                        <dd><span class="label label-info" id="summary_itemType"></span></dd>
                        <dt>将被添加的条目数量：</dt>
                        <dd><span class="label label-info" id="summary_itemCount"></span></dd>
                        <dt> &nbsp; </dt>
                        <dd><button class="btn btn-large"
                                    onclick="$('#tab1 a').eq(3).tab('show');">
                                    <i class="icon-chevron-left"></i>
                                    返回上一步</button>
                                <button class="btn btn-large btn-primary"
                                    onclick="$('#tab1 a').eq(5).tab('show');catchData();">
                                    <i class="icon-chevron-right icon-white"></i>
                                    好了，开始抓取数据</button></dd>
                    </dl>
                </div>

                <div class="tab-pane" id="part6">
                    <h2>6. 抓取结果</h2>
                    <div id="itemCatchResult">

                    </div>
                    <div id="catchResult">
                        <ol></ol>
                    </div>
                    <dl class="dl-horizontal">
                        <dt>&nbsp;</dt>
                        <dd>
                            <button class="btn btn-large"
                                    onclick="$('#tab1 a').eq(0).tab('show');">
                                    <i class="icon-chevron-left"></i>
                                    返回第一步</button>
                        </dd>
                    </dl>
                </div>

                <div class="tab-pane" id="part7">
                    
                </div>
            </div>
        </div>

        <footer class="footer"> 
            <p><hr /></p>
        <p>本系统是由na57开发的测试系统，所有数据目前只作为测试使用。</p>
        <p>系统所有数据均存储于nagu.cc概念云系统中，所有数据通过RDF三元组的形式进行组织。</p>
      </footer>
        <div class="hide" id="divDebug">
            <textarea cols="10" rows="10" disabled id="txtDebug"></textarea>
        </div>
    </div>


    <script src="../../Content/bootstrap/js/assets/jquery-1.8.2.min.js" type="text/javascript"></script> 
    
    <script src="../../Content/bootstrap/2.3.2/js/bootstrap.js" type="text/javascript"></script>
    
    <script src="../../Content/js/jquery.qrcode.min.js" type="text/javascript"></script>
    <script src="../../Content/js/jquery/fileupload/vendor/jquery.ui.widget.js" type="text/javascript"></script>
    <script src="../../Content/js/jquery/fileupload/jquery.fileupload.js" type="text/javascript"></script>
    <script src="../../Content/js/jquery/fileupload/jquery.iframe-transport.js" type="text/javascript"></script>

    <script src="../../Content/lib/jStorage/jstorage.min.js" type="text/javascript"></script>
    <script src="/Content/js/messengerjs/messenger.js" type="text/javascript" ></script> 

    
    <script src="../../Content/js/js-helper.js" type="text/javascript"></script>
    <script src="../../Content/js/jquery-helper.js" type="text/javascript"></script>
    <script src="../../Content/js/bootstrap-helper.js" type="text/javascript"></script>
    <script src="../../Content/js/nagu-helper.js" type="text/javascript"></script>
    <script src="../../Content/js/apps-helper.js" type="text/javascript"></script>
    <script src="../../Content/js/bootstarp-dropdownmenu.js" type="text/javascript"></script>
    <script src="../../Content/js/nagu-bs-accordion.js" type="text/javascript"></script>
    <script src="/Content/lib/jquery.jsonp-2.4.0.min.js"></script>
    <script src="js/catch.js" type="text/javascript"></script>
</body>
</html>